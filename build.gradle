buildscript {
	repositories {
		jcenter()
	}
	dependencies {
		classpath("org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.5")
	}
}

apply plugin: 'java'
apply plugin: 'jacoco'
apply plugin: "org.sonarqube"
apply plugin: 'eclipse'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

repositories {
	jcenter()
}

dependencies {
	compile("de.carne:java-default:5")
	testCompile("junit:junit:4.12")
}

jar {
	manifest {
		attributes(
			'Main-Class': 'de.carne.Application'
		)
	}
	from configurations.runtime.collect {
		it.name.matches('(java-default-.*.jar)|(java-jfx-.*.jar)') ? zipTree(it).matching { exclude 'META-INF/**' } : it
	}
}


jacoco {
	toolVersion = "0.7.9"
}

jacocoTestReport {
	reports {
		xml.enabled false
		html.enabled true
		html.destination file("${buildDir}/reports/jacocoHtml")
		csv.enabled false
	}
}

sonarqube {
}

eclipse {
	classpath {
		defaultOutputDir = file('eclipse-build')
	}
}
